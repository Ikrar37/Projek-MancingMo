<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verifikasi Email - MancingMo</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/verify_email.css' %}">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Verify Email Section -->
    <div class="verify-container">
        <div class="verify-card">
            <!-- Back Button -->
            <a href="{% url 'login' %}" class="back-button">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
                Kembali
            </a>

            <!-- Icon -->
            <div class="verify-icon">
                <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                    <path d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                    <path d="M9 11l2 2 4-4" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </div>

            <!-- Header -->
            <div class="verify-header">
                <h1>Verifikasi Email</h1>
                <p>Kode verifikasi telah dikirim ke</p>
                <p class="email-text">{{ user.email }}</p>
                <p class="check-email">Silakan cek inbox atau folder spam email Anda</p>
            </div>

            <!-- Form -->
            <form method="post" id="verifyForm">
                {% csrf_token %}
                
                <div class="form-group">
                    <label for="code">Masukkan Kode Verifikasi (6 digit)</label>
                    <input 
                        type="text" 
                        id="code" 
                        name="code" 
                        placeholder="000000"
                        maxlength="6"
                        pattern="[0-9]{6}"
                        required
                        autofocus
                        inputmode="numeric"
                    >
                    <div class="input-hint">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <line x1="12" y1="16" x2="12" y2="12"/>
                            <line x1="12" y1="8" x2="12.01" y2="8"/>
                        </svg>
                        <span>Kode terdiri dari 6 digit angka</span>
                    </div>
                </div>

                <button type="submit" class="btn-verify" id="verifyBtn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="20 6 9 17 4 12"/>
                    </svg>
                    Verifikasi Email
                </button>
            </form>

            <!-- Resend Section -->
            <div class="resend-section">
                <p class="resend-text">Tidak menerima email?</p>
                <a href="{% url 'resend_verification_code' username=user.username %}" class="btn-resend">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="23 4 23 10 17 10"/>
                        <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/>
                    </svg>
                    Kirim Ulang Kode
                </a>
            </div>
        </div>
    </div>

    <script>
    // Auto-format input untuk hanya angka
    document.getElementById('code').addEventListener('input', function(e) {
        this.value = this.value.replace(/[^0-9]/g, '');
    });

    // Form validation
    document.getElementById('verifyForm').addEventListener('submit', function(e) {
        const code = document.getElementById('code').value;
        
        if (code.length !== 6) {
            e.preventDefault();
            alert('Kode verifikasi harus 6 digit!');
            return false;
        }
        
        if (!/^\d+$/.test(code)) {
            e.preventDefault();
            alert('Kode verifikasi hanya boleh berisi angka!');
            return false;
        }
        
        // Disable button to prevent double submit
        const btn = document.getElementById('verifyBtn');
        btn.disabled = true;
        btn.innerHTML = '<span>Memverifikasi...</span>';
    });
    </script>
</body>
</html>